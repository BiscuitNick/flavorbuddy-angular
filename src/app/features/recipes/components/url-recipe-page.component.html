@if (!recipe() && isLoading()) {
<app-recipe-viewer-skeleton></app-recipe-viewer-skeleton>
} @if (recipe(); as currentRecipe) {
<app-recipe-viewer [recipe]="currentRecipe" [sourceUrl]="recipeSource()"></app-recipe-viewer>
} @else {
<section class="space-y-5 print-hidden">
  <div class="space-y-3">
    <h1 class="text-3xl font-semibold tracking-tight">Flavor Buddy</h1>
    <p class="max-w-2xl text-base text-slate-600">
      Get recipe card with ingredients and directions from (almost) any recipe URL.
    </p>
  </div>

  <form
    class="flex flex-col gap-3 sm:flex-row"
    [formGroup]="form"
    (ngSubmit)="onSubmit()"
    novalidate
  >
    <input
      type="url"
      formControlName="url"
      placeholder="https://example.com/recipe"
      autocomplete="off"
      class="min-w-0 flex-1 sm:w-2/3 rounded-xl border border-slate-300 bg-white px-4 py-3 text-base shadow-sm transition focus-visible:border-blue-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-200 disabled:opacity-60 placeholder:text-slate-400"
      [attr.aria-invalid]="form.controls.url.invalid && form.controls.url.touched"
      [attr.aria-describedby]="
        form.controls.url.invalid && form.controls.url.touched ? 'url-error' : null
      "
      required
    />
    <button
      type="submit"
      class="w-full sm:w-1/3 inline-flex items-center justify-center rounded-xl bg-gradient-to-r from-blue-600 to-blue-700 px-5 py-3 font-semibold text-white shadow transition hover:-translate-y-0.5 hover:shadow-lg disabled:cursor-not-allowed disabled:bg-slate-400 disabled:shadow-none"
      [disabled]="form.invalid || isLoading()"
    >
      {{ isLoading() ? 'Cooking...' : 'Convert' }}
    </button>
  </form>

  @if (form.controls.url.invalid && form.controls.url.touched) {
  <p id="url-error" class="text-sm font-medium text-red-600" role="alert" aria-live="assertive">
    Enter a valid http(s) recipe URL.
  </p>
  } @if (errorMessage(); as error) {
  <div
    class="rounded-lg border border-red-200 bg-red-50 px-4 py-3 text-sm font-medium text-red-700"
    role="alert"
    aria-live="assertive"
  >
    {{ error }}
  </div>
  }
</section>

<div class="print-hidden mt-6">
  <a
    routerLink="/convert-text"
    class="inline-flex items-center gap-2 text-sm font-semibold text-blue-600 hover:text-blue-700"
  >
    Convert Text â†’
  </a>
</div>
}
